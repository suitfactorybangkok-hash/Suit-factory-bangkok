<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Suit Factory Bangkok</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root{ --bg:#0d0d0d; --card:#111; --accent:#b6ff00; --muted:#ccc; --txt:#fff; --gap:10px; }
    body{ background:var(--bg); color:var(--txt); font-family:'Poppins',sans-serif; margin:0; padding:0; text-align:center; }
    h1{ font-family:'Playfair Display',serif; color:var(--accent); font-size:2.6rem; margin:20px 0 6px; }
    .subtitle{ color:var(--muted); margin-bottom:12px; }
    .button-container{ display:flex; justify-content:center; gap:12px; margin-bottom:14px; flex-wrap:wrap; }
    .button{ background:var(--accent); color:#000; padding:10px 14px; border-radius:28px; font-weight:600; text-decoration:none; }
    .cards{ padding:0 12px 28px; max-width:980px; margin:0 auto; }
    .card{ background:var(--card); border-radius:12px; margin:12px auto; overflow:hidden; box-shadow:0 6px 22px rgba(0,0,0,0.5); max-width:720px; transition:transform .15s; }
    .card:hover{ transform:translateY(-3px); }
    .card img{ width:100%; height:auto; display:block; object-fit:cover; }
    .card-body{ padding:12px 14px 16px; text-align:left; }
    .card h2{ color:var(--accent); margin:6px 0; font-size:1.05rem; }
    .card p{ color:var(--muted); margin:0; font-size:0.95rem; line-height:1.45; }
    footer{ color:#777; margin:20px 0 36px; font-size:0.86rem; }

    /* Modal styles */
    .modal{ display:none; position:fixed; inset:0; z-index:10020; background:rgba(0,0,0,0.7); align-items:center; justify-content:center; padding:16px; }
    .modal.show{ display:flex; }
    .modal-card{ background:#0f0f0f; border-radius:12px; padding:12px; width:100%; max-width:1100px; color:#fff; box-shadow:0 12px 40px rgba(0,0,0,0.6); text-align:left; }
    .modal-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .modal-head h3{ margin:0; color:var(--accent); font-size:1.1rem; }
    .btn-ghost{ background:transparent; border:1px solid #222; color:var(--muted); padding:8px 10px; border-radius:8px; cursor:pointer; }

    /* Option style */
    .option{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin:10px 0; padding:10px 12px; background:#0f0f0f; border-radius:8px; cursor:pointer; }
    .option small{ color:var(--muted); }

    /* Grid */
    .grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:var(--gap); }
    .grid img{ width:100%; aspect-ratio:4/5; object-fit:cover; border-radius:8px; display:block; cursor:pointer; box-shadow:0 6px 20px rgba(0,0,0,0.5); }
    @media(max-width:980px){ .grid{ grid-template-columns:repeat(3,1fr);} }
    @media(max-width:760px){ .grid{ grid-template-columns:repeat(2,1fr);} }
    @media(max-width:420px){ .grid{ grid-template-columns:repeat(1,1fr);} }

    /* Load more button */
    .load-more { margin:12px auto 6px; display:inline-block; padding:10px 14px; border-radius:10px; background:var(--accent); color:#000; font-weight:700; cursor:pointer; }

    /* Lightbox */
    .lb{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:11000; align-items:center; justify-content:center; flex-direction:column; padding:12px; }
    .lb.show{ display:flex; }
    .lb-inner{ max-width:1100px; width:100%; display:flex; align-items:center; justify-content:center; position:relative; flex-direction:column; }
    .lb-img{ max-width:100%; max-height:82vh; border-radius:8px; object-fit:contain; box-shadow:0 12px 40px rgba(0,0,0,0.7); }
    .lb-close, .lb-prev, .lb-next{ position:absolute; background:transparent; border:none; color:#fff; font-size:34px; padding:10px; cursor:pointer; z-index:11001; }
    .lb-close{ top:12px; right:12px; font-size:36px; }
    .lb-prev{ left:8px; top:50%; transform:translateY(-50%); }
    .lb-next{ right:8px; top:50%; transform:translateY(-50%); }
    .lb-counter{ color:var(--muted); margin-top:10px; font-size:13px; }
    .lb-thumbs{ display:flex; gap:8px; overflow-x:auto; padding:10px 6px; margin-top:12px; max-width:95%; }
    .lb-thumbs img{ width:64px; height:64px; object-fit:cover; border-radius:6px; cursor:pointer; opacity:.72; border:2px solid transparent; }
    .lb-thumbs img.active{ opacity:1; border-color:var(--accent); }
    .note{ color:var(--muted); font-size:13px; margin-top:8px; }

  </style>
</head>
<body>

  <h1>Suit Factory</h1>
  <p class="subtitle">Fabrics — choose quality then browse gallery</p>

  <div class="button-container">
    <a class="button" href="tel:+66643122029">Call</a>
    <a class="button" href="https://wa.me/66643122029" target="_blank">WhatsApp</a>
  </div>

  <div class="cards">
    <div class="card">
      <img src="images/navyslimcutsuits.jpg" alt="Slim Fit">
      <div class="card-body"><h2>Slim Fit Suit</h2><p>Tap to open suit collections (kept separate).</p></div>
    </div>

    <div class="card">
      <img src="images/tie1.jpg" alt="Luxury Ties">
      <div class="card-body"><h2>Luxury Neck Ties</h2><p>Choose tie catalogs (kept separate).</p></div>
    </div>

    <a class="card-link" href="#" id="fabricsCard">
      <div class="card">
        <img src="images/101.jpg" alt="Fabrics Collection">
        <div class="card-body">
          <h2>Fabrics Collection</h2>
          <p>Tap to choose fabric quality (10%–20% / 40%–60% / 70%–80%) and browse.</p>
        </div>
      </div>
    </a>
  </div>

  <footer>Made for Suit Factory Bangkok — browse by fabric quality.</footer>

  <!-- Fabric chooser modal -->
  <div id="fabricChooser" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <h3>Choose fabric quality</h3>
        <button id="closeChooser" class="btn-ghost">Close</button>
      </div>

      <div id="fabricOptions">
        <!-- data-prefix = group prefix, data-count = how many files in that group -->
        <div class="option" data-prefix="10" data-count="45">
          <div><strong>10%–20% wool blend</strong><br><small>Lightweight / 45 photos</small></div>
          <div><small>View</small></div>
        </div>

        <div class="option" data-prefix="40" data-count="0">
          <div><strong>40%–60% wool blend</strong><br><small>Balanced quality (no photos yet)</small></div>
          <div><small>View</small></div>
        </div>

        <div class="option" data-prefix="70" data-count="0">
          <div><strong>70%–80% wool blend</strong><br><small>Premium (no photos yet)</small></div>
          <div><small>View</small></div>
        </div>
      </div>

      <div class="note">Make sure your images are uploaded to /images/ named like prefix+index.jpg — e.g. prefix "10" + index 1 → <em>101.jpg</em>, prefix "10" + index 45 → <em>1045.jpg</em>.</div>
    </div>
  </div>

  <!-- Gallery modal (reused for any group) -->
  <div id="galleryModal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <h3 id="galleryTitle">Gallery</h3>
        <button id="closeGallery" class="btn-ghost">Close</button>
      </div>

      <div id="galleryGrid" class="grid"></div>
      <div style="text-align:center;">
        <button id="loadMoreGallery" class="load-more">Load more</button>
      </div>
      <div class="note" id="galleryNote"></div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lb" aria-hidden="true">
    <button id="lbClose" class="lb-close" aria-label="Close">&times;</button>
    <button id="lbPrev" class="lb-prev" aria-label="Previous">&#10094;</button>
    <div class="lb-inner" role="dialog" aria-modal="true">
      <img id="lbImage" class="lb-img" src="" alt="Gallery image">
      <div id="lbCounter" class="lb-counter"></div>
      <div id="lbThumbs" class="lb-thumbs" aria-hidden="false"></div>
    </div>
    <button id="lbNext" class="lb-next" aria-label="Next">&#10095;</button>
  </div>

<script>
/* ---------- Helpers to build filenames for a group ----------
   Filenames are prefix + index + ".jpg"
   Example: prefix "10" + index 1 -> "101.jpg"
*/
function buildGroupFiles(prefix, count) {
  const arr = [];
  for (let i = 1; i <= count; i++) {
    // ensure numbers like 1..45 form 101..1045 when prefix is "10"
    arr.push(prefix + String(i) + ".jpg");
  }
  return arr;
}

/* ---------- UI elements ---------- */
const fabricsCard = document.getElementById('fabricsCard');
const fabricChooser = document.getElementById('fabricChooser');
const closeChooser = document.getElementById('closeChooser');
const fabricOptions = document.getElementById('fabricOptions');

const galleryModal = document.getElementById('galleryModal');
const galleryTitle = document.getElementById('galleryTitle');
const galleryGrid = document.getElementById('galleryGrid');
const loadMoreGallery = document.getElementById('loadMoreGallery');
const galleryNote = document.getElementById('galleryNote');
const closeGallery = document.getElementById('closeGallery');

/* Lightbox elements */
const lb = document.getElementById('lightbox');
const lbImage = document.getElementById('lbImage');
const lbThumbs = document.getElementById('lbThumbs');
const lbCounter = document.getElementById('lbCounter');
const lbClose = document.getElementById('lbClose');
const lbPrev = document.getElementById('lbPrev');
const lbNext = document.getElementById('lbNext');

let activeGallery = [];
let currentIndex = 0;
let nextBatchIndex = 0;
const BATCH = 30; // thumbnails per "load more" click (adjustable)

/* Open chooser when Fabrics card clicked */
fabricsCard.addEventListener('click', (e) => {
  e.preventDefault();
  fabricChooser.classList.add('show');
  fabricChooser.setAttribute('aria-hidden','false');
});

/* Close chooser */
closeChooser.addEventListener('click', () => {
  fabricChooser.classList.remove('show');
  fabricChooser.setAttribute('aria-hidden','true');
});
fabricChooser.addEventListener('click', (e) => { if (e.target === fabricChooser) { fabricChooser.classList.remove('show'); fabricChooser.setAttribute('aria-hidden','true'); } });

/* When user selects a fabric group */
fabricOptions.querySelectorAll('.option').forEach(opt => {
  opt.addEventListener('click', () => {
    const prefix = opt.dataset.prefix;
    const count = parseInt(opt.dataset.count, 10) || 0;
    // if no images yet, show empty message
    if (count === 0) {
      galleryTitle.textContent = opt.querySelector('strong').innerText + " — No photos yet";
      galleryGrid.innerHTML = "";
      galleryNote.textContent = "No images uploaded for this group yet.";
      loadMoreGallery.style.display = "none";
      galleryModal.classList.add('show');
      galleryModal.setAttribute('aria-hidden','false');
      fabricChooser.classList.remove('show');
      fabricChooser.setAttribute('aria-hidden','true');
      return;
    }
    // build filenames for this group
    const files = buildGroupFiles(prefix, count);
    openGroupGallery(opt.querySelector('strong').innerText, files);
    // close chooser
    fabricChooser.classList.remove('show');
    fabricChooser.setAttribute('aria-hidden','true');
  });
});

/* Open a group's gallery (files = array of filenames) */
function openGroupGallery(title, files) {
  galleryTitle.textContent = title;
  galleryGrid.innerHTML = "";
  activeGallery = files.slice(); // save for lightbox
  nextBatchIndex = 0;
  galleryNote.textContent = `Showing ${files.length} images.`;
  loadMoreGallery.style.display = "inline-block";
  // append first batch
  appendGalleryBatch();
  galleryModal.classList.add('show');
  galleryModal.setAttribute('aria-hidden','false');
}

/* Append next batch of thumbnails into galleryGrid */
function appendGalleryBatch() {
  const remaining = activeGallery.length - nextBatchIndex;
  if (remaining <= 0) return;
  const take = Math.min(BATCH, remaining);
  for (let i = 0; i < take; i++) {
    const idx = nextBatchIndex + i;
    const name = activeGallery[idx];
    const img = document.createElement('img');
    img.src = "images/" + name;
    img.alt = name;
    img.loading = "lazy";
    img.dataset.index = idx;
    img.addEventListener('click', () => openLightboxFromGrid(idx));
    galleryGrid.appendChild(img);
  }
  nextBatchIndex += take;
  if (nextBatchIndex >= activeGallery.length) loadMoreGallery.style.display = "none";
}

/* Close gallery modal */
closeGallery.addEventListener('click', () => {
  galleryModal.classList.remove('show');
  galleryModal.setAttribute('aria-hidden','true');
});
galleryModal.addEventListener('click', (e) => { if (e.target === galleryModal) { galleryModal.classList.remove('show'); galleryModal.setAttribute('aria-hidden','true'); } });
loadMoreGallery.addEventListener('click', appendGalleryBatch);

/* ---------- Lightbox code (reusable) ---------- */
function buildThumbs(list) {
  lbThumbs.innerHTML = "";
  const limit = Math.min(120, list.length);
  for (let i = 0; i < limit; i++) {
    const t = document.createElement('img');
    t.src = "images/" + list[i];
    t.alt = "Thumb " + (i+1);
    t.dataset.index = i;
    t.addEventListener('click', () => showImage(i));
    lbThumbs.appendChild(t);
  }
  if (list.length > limit) {
    const more = document.createElement('div');
    more.style.color = "var(--muted)";
    more.style.padding = "8px";
    more.style.fontSize = "13px";
    more.textContent = `… and ${list.length - limit} more`;
    more.style.alignSelf = "center";
    more.style.marginLeft = "6px";
    lbThumbs.appendChild(more);
  }
}

function updateActiveThumb() {
  Array.from(lbThumbs.children).forEach((el, idx) => {
    if (el.tagName.toLowerCase() === 'img') el.classList.toggle('active', idx === currentIndex);
  });
  lbCounter.textContent = (currentIndex + 1) + " / " + activeGallery.length;
}

function showImage(i) {
  currentIndex = (i + activeGallery.length) % activeGallery.length;
  lbImage.src = "images/" + activeGallery[currentIndex];
  lbImage.alt = "Image " + (currentIndex + 1);
  updateActiveThumb();
}

function openLightbox(start=0) {
  showImage(start);
  lb.classList.add('show');
  lb.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
}

function closeLightbox() {
  lb.classList.remove('show');
  lb.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
}

function prevImage(){ showImage(currentIndex - 1); }
function nextImage(){ showImage(currentIndex + 1); }

/* Open lightbox from a gallery thumbnail (activeGallery already set) */
function openLightboxFromGrid(idx) {
  buildThumbs(activeGallery);
  openLightbox(idx);
  galleryModal.classList.remove('show');
  galleryModal.setAttribute('aria-hidden','true');
}

/* lightbox controls */
lbPrev.addEventListener('click', prevImage);
lbNext.addEventListener('click', nextImage);
lbClose.addEventListener('click', closeLightbox);
lb.addEventListener('click', (e) => { if (e.target === lb) closeLightbox(); });

/* touch swipe */
let startX = 0;
lbImage.addEventListener('touchstart', (e) => startX = e.changedTouches[0].clientX);
lbImage.addEventListener('touchend', (e) => {
  const diff = e.changedTouches[0].clientX - startX;
  if (diff > 40) prevImage(); else if (diff < -40) nextImage();
});

/* keyboard */
document.addEventListener('keydown', (e) => {
  if (!lb.classList.contains('show')) return;
  if (e.key === 'ArrowLeft') prevImage();
  if (e.key === 'ArrowRight') nextImage();
  if (e.key === 'Escape') closeLightbox();
});
</script>
</body>
</html>
```0
